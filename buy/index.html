<!DOCTYPE html>
<html>
<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/web3/1.5.2/web3.min.js"></script>
</head>
<body>
    <h2>BTS Manager</h2>
    <label for="tier">Select Tier:</label>
    <select id="tier" name="tier">
        <option value="1">Bronze</option>
        <option value="2">Silver</option>
        <option value="3">Gold</option>
        <option value="4">Diamond</option>
    </select>
    <br>
    <label for="refAddress">Referral Address:</label>
    <input type="text" id="refAddress" name="refAddress" value="0x0000000000000000000000000000000000000000">
    <br>
    <button onclick="buyTier()">Buy Tier</button>
</body>

<script>
    let web3 = new Web3('https://bsc-dataseed.binance.org'); // Connecting to Binance Smart Chain
    let contract;

    const contractAddress = '0xYourContractAddress';
    const contractABI = 'ABI of your contract'; // Replace this with your contract's ABI

    async function init() {
        contract = new web3.eth.Contract(contractABI, contractAddress);
        await loadTierPrices();
    }

    async function loadTierPrices() {
        let select = document.getElementById('tier');
        for(let i = 1; i <= 4; i++) {
            let price = await contract.methods.tierPrices(i).call();
            price = web3.utils.fromWei(price, 'ether');
            select.options[i-1].text = select.options[i-1].text + ' - ' + price + ' BNB';
        }
    }

    async function buyTier() {
        await init();
        const tier = document.getElementById('tier').value;
        const refAddress = document.getElementById('refAddress').value;

        const accounts = await web3.eth.getAccounts();
        const sender = accounts[0];

        const price = await contract.methods.tierPrices(tier).call();
        
        await contract.methods.buyTier(tier, refAddress).send({from: sender, value: price});
    }

    window.onload = async function() {
        await init();
    };
</script>
</html>
